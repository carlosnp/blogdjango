{% extends "base.html" %}

{% block title %} {{block.super}} | Post Lists {% endblock %}

{% block content %}

<!-- <a href="{% url 'posts:create' %}">Crear Post</a> -->
<!-- Encabezado -->
<div class="row">
	<div class="col-xs-7">
		<h2 class="title-post"> 
			<a href="{% url 'posts:list' %}" 
			style="color: white; text-decoration:None"> 
				{{ title }} 
			</a>
		</h2>
	</div>
	<div class="col-xs-5 btn-group" role="group">
		<!-- crear un nuevo post -->
		<a href="{% url 'posts:create' %}">
			<button class="btn-post" type="button" data-toggle="tooltip" data-placement="bottom" title="Crear">
				<i class="fa fa-pencil fa-2x" aria-hidden="true"></i>
			</button>
		</a>
	</div>
</div>
<!-- Buscador -->
<div class="row" style="margin: 0 5px;">
	<form method="GET" action="">
		<div class="input-group mb-2">
			<input type="text" placeholder="Buscar Post" class="form-control" name="q">
		  <div class="input-group-append">
		  	<input type="submit" value="Buscar" class="input-group-text" value="{{ request.GET.q }}">
		  </div>
		</div>
	</form>
</div>
<br>
{% for obj in object_list %}
	<div class="row container-fluid" style="margin: 10px auto; display: flex; align-items: center; position: relative; width: 80%;">
		<div class="col-xs-6">
			<div class="card" style="max-width:400px; width:350px;">
				{% if obj.image %}
					<img src="{{ obj.image.url }}" alt="Card image cap" class="img-thumbnail">
				{% endif %}
			</div>
		</div>
		<div class="col-xs-6">
			<div class="card" style="width:600px;">
				<div class="card-body">
					<!-- <h2>  <a href="/posts/{{obj.id}}">  {{ obj.title }} </a> </h2> -->
					<!-- <h2>  <a href="{% url 'posts:detail' id=obj.id %}">  {{ obj.title }} </a> </h2> -->
					<h3 class="card-title">  {{ obj.title|upper }} <small style="color:lightslategrey"> {{ obj.timestamp|date:"D d M Y" }} </small> </h3>
					{% comment %}
					<div class="content-markdown"> {{ obj.content|truncatechars:150 }} </div>

					ver 
					https://docs.djangoproject.com/en/2.1/ref/templates/builtins/
					
					{% endcomment %}
					<div class="content-markdown"> {{ obj.get_markdown|truncatewords_html:10 }} </div>
					<!-- Si es un borrador -->
					{% if obj.draf %}
						<p class="card-text">
							<small class="text-muted">  
								<span style="color:red;"> 
									Borrador
								</span>
								<br>
								<!-- Si la fecha de publicacion es mayor a la actual -->
								{% if obj.publish > today %}
									<span> Será publicado el {{ obj.publish }} </span>
								{% endif %}
							</small>
						</p>    
					{% endif %}
					<h5> {{ obj.author }} </h5>
					<p> <a href="{{ obj.get_absolute_url }}" class="card-link" role="button">Ver</a> </p>
				</div>
			</div>
		</div>
		<hr>
	</div>
{% endfor %}
	<hr>
	<!-- Paginacion -->
	<div class="pagination">
		<span class="step-links">
			{% if object_list.has_previous %}
			<!-- <a href="?page=1">&laquo; primero</a> -->
			<a href="?page={{ object_list.previous_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">anterior</a>
			{% endif %}
			
			<span class="current">
				Página {{ object_list.number }} de {{ object_list.paginator.num_pages }}.
			</span>
			
			{% if object_list.has_next %}
			<a href="?page={{ object_list.next_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">siguiente</a>
			<!-- <a href="?page={{ object_list.paginator.num_pages }}">último &raquo;</a> -->
			{% endif %}
		</span>
	</div>
	<hr>

{% endblock %}

<script>
	{% block script %}
	{% endblock script %}
</script>